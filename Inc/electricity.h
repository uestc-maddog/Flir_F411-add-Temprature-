/*-----------------------------------------------------------------
 * Name:    electricity.h  
 * Purpose:  
 *-----------------------------------------------------------------
 * 
 * Copyright (c) *reserve
 
||                       _      _               ||
||    /\  /\  __  _  __ | | __ | | ____  ___ _  ||
||   /  \/  \/ _ ` |/ _ ` |/ _ ` |/ _  \/ _ ` | ||
||  / /\  /\  (_|    (_|    (_|    (_)   (_)  | ||
|| /_/  \/  \_.__, |\__, _|\__, _|\____/\___. | ||
|| =====================================|____/  ||
||                                              ||

 -----------------------------------------------------------------*/
#ifndef __ELECTRICITY_H
#define __ELECTRICITY_H
/********************************************************************************************************
 *                                               INCLUDES
 ********************************************************************************************************/
#include "stm32f4xx_hal.h"
#include "flir_menu.h"

/********************************************************************************************************
 *                                                 MACROS
 ********************************************************************************************************/

#define Elec_Thre1 2.10f    // 区分4个电量等级的3个电压阈值 （V）          
#define Elec_Thre2 2.025f                
#define Elec_Thre3 1.95f 
#define Elec_Thre4 1.875f 
#define Elec_Thre5 1.8f

/********************************************************************************************************
 *                                               CONSTANTS
 ********************************************************************************************************/

 
/********************************************************************************************************
 *                                               GLOBAL VARIABLES
 ********************************************************************************************************/
typedef enum{  
	 Elec_High= 0, Elec_Med ,Elec_Low , Elec_Empty ,Elec_Full
} Elec_Status;
/********************************************************************************************************
 *                                               EXTERNAL VARIABLES
 ********************************************************************************************************/
extern volatile Quan_baterry temp;
 
/********************************************************************************************************
 *                                               EXTERNAL FUNCTIONS
 ********************************************************************************************************/
/*********************************************************************
 * @fn        Get_Elec()
 *
 * @brief     get the current electricity of the battery  
 *
 * @param     None
 *
 * @return    Elec_Empty	Elec_Low	Elec_Med	Elec_High
 */
Quan_baterry Get_Elec(void);

/*********************************************************************
 * @fn       Baterrycheck
 *
 * @brief   check the quantity of baterry,charging,and is used to main.
 *
 * @param   no
 *
 * @return  no
 */
void Baterrycheck(void);

/*********************************************************************
 * @fn        standbyPower()
 *
 * @brief     configure LTC3553-2 to standby mode,
 *						disable LCD and flir camera.
 *						call this function before sleep.
 *
 * @param     none
 *
 * @return    none
 */
void setSandby(void);

/*********************************************************************
 * @fn        PBsetSandby()
 *
 * @brief     configure system to standby mode,
 *						disable LCD and flir camera.
 *						call this function before sleep.
 *
 * @param     none
 * 
 * @return    none
 */
void PBsetSandby(void);

/*********************************************************************
 * @fn        CLOCK_OFF()
 *
 * @brief     关闭外设时钟
 *						
 *						
 *
 * @param     none
 *
 * @return    none
 */
void CLOCK_OFF(void);

/*********************************************************************
 * @fn        resetStandby()
 *
 * @brief     Disable LTC3553-2 after system reset. Call this function
 *						first thing during init stage 
 *
 * @param     none
 *
 * @return    none
 */
void resetStandby( void );

void setSandby2( void );

 /********************************************************************************************************
 *                                               LOCAL FUNCTIONS
 ********************************************************************************************************/

#endif




